{
  "permissions": {
    "allow": [
      "WebSearch",
      "Bash(chmod:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(docker ps:*)",
      "Bash(docker logs:*)",
      "Bash(umask)",
      "Bash(getfacl:*)",
      "Bash(apt-get install:*)",
      "Bash(sudo apt-get install:*)",
      "Bash(git ls-tree:*)",
      "Bash(bash:*)",
      "Bash(docker restart:*)",
      "Bash(mysql:*)",
      "Bash(PGPASSWORD=DevPassword123! psql:*)",
      "Bash(docker stop:*)",
      "Bash(docker rm:*)",
      "Bash(docker volume rm:*)",
      "Bash(docker compose:*)",
      "Bash(docker inspect:*)",
      "Bash(python3:*)",
      "Bash(docker run:*)",
      "Bash(docker exec:*)",
      "Bash(cat:*)",
      "Bash(echo:*)",
      "Bash(__NEW_LINE__ echo \"1. CONTENEDORES DOCKER\")",
      "Bash(__NEW_LINE__ echo \"\")",
      "Bash(curl:*)",
      "Bash(find:*)",
      "Bash(npm run build:*)",
      "Bash(pip install:*)",
      "Bash(pkill:*)",
      "Bash(lsof:*)",
      "Bash(xargs:*)",
      "Bash(func start:*)",
      "Bash(npm run dev:*)",
      "Bash(pg_dump:*)",
      "Bash(sudo sh -c 'echo \"\"\"\"deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main\"\"\"\" > /etc/apt/sources.list.d/pgdg.list')",
      "Bash(wget:*)",
      "Bash(sudo apt-key add:*)",
      "Bash(sudo apt-get update:*)",
      "Bash(sudo rm:*)",
      "Bash(sudo sh -c 'echo \"\"\"\"deb https://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main\"\"\"\" > /etc/apt/sources.list.d/pgdg.list')",
      "Bash(sudo gpg:*)",
      "Bash(sudo sed:*)",
      "Bash(mv:*)",
      "Bash(gh codespace ports visibility:*)",
      "Bash(git rm:*)",
      "Bash(sqlcmd:*)",
      "Bash(npx tsc:*)",
      "Bash(kill:*)",
      "Bash(npm install:*)",
      "Bash(mysqladmin:*)",
      "Bash(python -m py_compile:*)",
      "Bash(jq:*)",
      "Bash(docker start:*)",
      "Bash(docker volume:*)",
      "Bash(pstree:*)",
      "Bash(ps:*)",
      "Bash(/dev/null docker compose up -d sqlserver echo 'Esperando 60 segundos para que SQL Server inicie...' sleep 60 docker ps --format 'table {{.Names}}\\t{{.Status}}')",
      "Bash(gunzip:*)",
      "Bash(grep:*)",
      "Bash(killall:*)",
      "Bash(az bicep build:*)",
      "Bash(timeout 10 func start:*)",
      "Bash(git push:*)",
      "Bash(az keyvault list-deleted:*)",
      "Bash(git tag:*)",
      "Bash(gh release list:*)",
      "Bash(gh release view:*)",
      "Bash(gh workflow list:*)",
      "Bash(gh run list:*)",
      "Bash(gh run view:*)",
      "Bash(ls:*)",
      "Bash(git reset:*)",
      "Bash(az deployment-scripts show-log:*)",
      "Bash(az account set:*)",
      "Bash(az group list:*)",
      "Bash(az deployment group:*)",
      "Bash(az functionapp show:*)",
      "Bash(az functionapp function list:*)",
      "Bash(az functionapp log deployment show:*)",
      "Bash(az webapp log tail:*)",
      "Bash(timeout 30 az webapp log tail:*)",
      "Bash(az functionapp config appsettings list:*)",
      "Bash(az functionapp restart:*)",
      "Bash(az functionapp config show:*)",
      "Bash(az monitor app-insights query:*)",
      "Bash(az functionapp log download:*)",
      "Bash(unzip:*)",
      "Bash(az webapp log:*)",
      "Bash(az group delete:*)",
      "Bash(az group create:*)",
      "Bash(for i in 1 2 3 4 5)",
      "Bash(do echo \"Request $i:\")",
      "Bash(done)",
      "Bash(az functionapp deployment source config-zip:*)",
      "Bash(az functionapp config appsettings set:*)",
      "Bash(git checkout:*)",
      "Bash(zip:*)",
      "Bash(az staticwebapp show:*)",
      "Bash(az staticwebapp appsettings list:*)",
      "Bash(az rest:*)",
      "Bash(az account show:*)",
      "Bash(az deployment-scripts:*)",
      "Bash(az resource list:*)",
      "Bash(az staticwebapp:*)",
      "Bash(az ad app:*)",
      "Bash(az storage blob list:*)",
      "Bash(az storage container list:*)",
      "Bash(az group show:*)",
      "Bash(az storage account show:*)",
      "Bash(az role assignment list:*)",
      "Bash(az functionapp identity show:*)",
      "Bash(do if ! ps aux)",
      "Bash(then echo \"Build completed after $i0 seconds\" break fi sleep 10 echo \"Still building... \\($i0s\\)\" done __NEW_LINE_e4cfd7b39ae2eca9__ echo \"\" echo \"=== Build log tail ===\" tail -20 /tmp/build.log)",
      "Bash(npx vite:*)",
      "Bash(tee:*)",
      "Bash(az storage blob upload-batch:*)",
      "Bash(az functionapp list:*)",
      "Bash(az storage account list:*)",
      "Bash(TEMPLATE_URL=\"https://raw.githubusercontent.com/pablodiloreto/dilux-azure-databases-backup-alpha/main/infra/azuredeploy.json\")",
      "Bash(gh release create:*)",
      "Bash(git restore:*)",
      "WebFetch(domain:raw.githubusercontent.com)",
      "Bash(az deployment operation group list:*)",
      "Bash(sort:*)",
      "Bash(az appservice plan list:*)",
      "Bash(az storage container create:*)",
      "Bash(az functionapp config appsettings delete:*)",
      "Bash(az functionapp deploy:*)",
      "Bash(__NEW_LINE_038d5bed6d20539f__ az functionapp config appsettings delete --name dilux68-kyqqhm-api --resource-group dilux68-rg --setting-names \"WEBSITE_RUN_FROM_PACKAGE\" \"SCM_DO_BUILD_DURING_DEPLOYMENT\" \"ENABLE_ORYX_BUILD\" --only-show-errors -o none)",
      "Bash(__NEW_LINE_038d5bed6d20539f__ echo \"✅ Settings eliminados\")",
      "Bash(__NEW_LINE_038d5bed6d20539f__ echo \"\")",
      "Bash(__NEW_LINE_038d5bed6d20539f__ echo \"=== Reiniciando para limpiar cache ===\")",
      "Bash(__NEW_LINE_038d5bed6d20539f__ az functionapp restart --name dilux68-kyqqhm-api --resource-group dilux68-rg --only-show-errors)",
      "Bash(__NEW_LINE_038d5bed6d20539f__ echo \"✅ App reiniciada\")",
      "Bash(__NEW_LINE_038d5bed6d20539f__ sleep 20)",
      "Bash(__NEW_LINE_038d5bed6d20539f__ echo \"=== Verificando settings limpios ===\")",
      "Bash(__NEW_LINE_038d5bed6d20539f__ az functionapp config appsettings list --name dilux68-kyqqhm-api --resource-group dilux68-rg --query \"[?starts_with\\(name, ''WEBSITE_RUN''\\) || starts_with\\(name, ''SCM_''\\) || starts_with\\(name, ''ENABLE_''\\)].name\" -o tsv)",
      "Bash(__NEW_LINE_700d3354a4d62a2c__ echo \"Comando: az functionapp deployment source config-zip --build-remote true\")",
      "Bash(__NEW_LINE_700d3354a4d62a2c__ echo \"\")",
      "Bash(__NEW_LINE_700d3354a4d62a2c__ cd /tmp)",
      "Bash(__NEW_LINE_700d3354a4d62a2c__ az functionapp deployment source config-zip --resource-group dilux68-rg --name dilux68-kyqqhm-api --src api.zip --build-remote true --timeout 600)",
      "Bash(__NEW_LINE_4af677f07463408d__ az functionapp function list --name dilux68-kyqqhm-api --resource-group dilux68-rg --query \"length\\(@\\)\" -o tsv)",
      "Bash(__NEW_LINE_4af677f07463408d__ echo \"\")",
      "Bash(__NEW_LINE_4af677f07463408d__ echo \"=== Probando health endpoint ===\")",
      "Bash(__NEW_LINE_4af677f07463408d__ curl -s \"https://dilux68-kyqqhm-api.azurewebsites.net/api/health\")",
      "Bash(__NEW_LINE_f83b141f6bd8dee2__ cd /tmp)",
      "Bash(__NEW_LINE_f83b141f6bd8dee2__ az functionapp deployment source config-zip --resource-group dilux68-rg --name dilux68-kyqqhm-scheduler --src scheduler.zip --build-remote true --timeout 600)",
      "Bash(__NEW_LINE_f83b141f6bd8dee2__ echo \"\")",
      "Bash(__NEW_LINE_f83b141f6bd8dee2__ echo \"=== Desplegando Processor ===\")",
      "Bash(__NEW_LINE_f83b141f6bd8dee2__ az functionapp deployment source config-zip --resource-group dilux68-rg --name dilux68-kyqqhm-processor --src processor.zip --build-remote true --timeout 600)",
      "Bash(__NEW_LINE_270237076a3867e1__ for app in scheduler processor)",
      "Bash(do)",
      "Bash(app_name=\"dilux68-kyqqhm-$app\")",
      "Bash(__NEW_LINE_270237076a3867e1__ echo \"\")",
      "Bash(__NEW_LINE_270237076a3867e1__ echo \"=== Reiniciando apps ===\")",
      "Bash(__NEW_LINE_270237076a3867e1__ az functionapp restart --name dilux68-kyqqhm-scheduler --resource-group dilux68-rg --only-show-errors)",
      "Bash(__NEW_LINE_270237076a3867e1__ az functionapp restart --name dilux68-kyqqhm-processor --resource-group dilux68-rg --only-show-errors)",
      "Bash(__NEW_LINE_270237076a3867e1__ echo \"✅ Apps reiniciadas\")",
      "Bash(__NEW_LINE_270237076a3867e1__ sleep 15)",
      "Bash(__NEW_LINE_af6cf53a310bb0ec__ cd /tmp)",
      "Bash(__NEW_LINE_af6cf53a310bb0ec__ az functionapp deployment source config-zip --resource-group dilux68-rg --name dilux68-kyqqhm-scheduler --src scheduler.zip --build-remote true --timeout 600)",
      "Bash(__NEW_LINE_b6781bced614de5b__ cd /tmp)",
      "Bash(__NEW_LINE_b6781bced614de5b__ az functionapp deployment source config-zip --resource-group dilux68-rg --name dilux68-kyqqhm-processor --src processor.zip --build-remote true --timeout 600)",
      "Bash(az functionapp cors show:*)",
      "Bash(az functionapp deployment list:*)",
      "Bash(for app in api scheduler processor)",
      "Bash(az functionapp cors add:*)",
      "Bash(gh run watch:*)",
      "Bash(az group:*)",
      "Bash(az functionapp update:*)",
      "WebFetch(domain:github.com)",
      "Bash(az monitor activity-log:*)",
      "Bash(az network vnet subnet show:*)",
      "Bash(az network vnet subnet list:*)",
      "Bash(az network vnet list:*)"
    ],
    "deny": [],
    "ask": []
  }
}
